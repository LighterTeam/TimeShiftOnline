/**
 * Created with JetBrains WebStorm.
 * User: controlstrength
 * Date: 13-5-13
 * Time: 下午5:02
 * To change this template use File | Settings | File Templates.
 */
var CMRule = [["A","1","S"],["A","1","3"],["A","2","4"],["A","3","5"],["A","4","6"],["A","5","7"],["A","6","8"],["A","7","9"],["A","8","I"],["A","9","J"],["A","10","Q"],["A","11","K"],["A","12","A"],["A","13","2"],["B","14","S3"],["B","14","33"],["B","15","44"],["B","16","55"],["B","17","66"],["B","18","77"],["B","19","88"],["B","20","99"],["B","21","II"],["B","22","JJ"],["B","23","QQ"],["B","24","KK"],["B","25","AA"],["C","26","S33"],["C","26","333"],["C","27","444"],["C","28","555"],["C","29","666"],["C","30","777"],["C","31","888"],["C","32","999"],["C","33","IIII"],["C","34","JJJ"],["C","35","QQQ"],["C","36","KKK"],["D","307","S333"],["D","308","4444"],["D","309","5555"],["D","310","6666"],["D","311","7777"],["D","312","8888"],["D","313","9999"],["D","314","IIII"],["D","315","JJJJ"],["D","316","QQQQ"],["D","317","KKKK"],["D","318","AAA"],["F","26","S4567"],["F","26","34567"],["F","27","45678"],["F","28","56789"],["F","29","6789I"],["F","30","789IJ"],["F","31","89IJQ"],["F","32","9IJQK"],["G","33","S45678"],["G","33","345678"],["G","34","456789"],["G","35","56789I"],["G","36","6789IJ"],["G","37","789IJQ"],["G","38","89IJQK"],["H","39","S456789"],["H","39","3456789"],["H","40","456789I"],["H","41","56789IJ"],["H","42","6789IJQ"],["H","43","789IJQK"],["I","44","S456789I"],["I","44","3456789I"],["I","45","456789IJ"],["I","46","56789IJQ"],["I","47","6789IJQK"],["J","48","S456789IJ"],["J","48","3456789IJ"],["J","49","456789IJQ"],["J","50","56789IJQK"],["K","51","S456789IJQ"],["K","51","3456789IJQ"],["K","52","456789IJQK"],["L","53","S456789IJQK"],["L","53","3456789IJQK"],["CA","54","S334"],["CA","55","S335"],["CA","56","S336"],["CA","57","S337"],["CA","58","S338"],["CA","59","S339"],["CA","60","S33I"],["CA","61","S33J"],["CA","62","S33Q"],["CA","63","S33K"],["CA","64","S33A"],["CA","65","S332"],["CB","66","S3344"],["CB","67","S3355"],["CB","68","S3366"],["CB","69","S3377"],["CB","70","S3388"],["CB","71","S3399"],["CB","72","S33II"],["CB","73","S33JJ"],["CB","74","S33QQ"],["CB","75","S33KK"],["CB","76","S33AA"],["CA","54","3334"],["CA","55","3335"],["CA","56","3336"],["CA","57","3337"],["CA","58","3338"],["CA","59","3339"],["CA","60","333I"],["CA","61","333J"],["CA","62","333Q"],["CA","63","333K"],["CA","64","333A"],["CA","65","3332"],["CB","66","33344"],["CB","67","33355"],["CB","68","33366"],["CB","69","33377"],["CB","70","33388"],["CB","71","33399"],["CB","72","333II"],["CB","73","333JJ"],["CB","74","333QQ"],["CB","75","333KK"],["CB","76","333AA"],["CA","77","3444"],["CA","78","4445"],["CA","79","4446"],["CA","80","4447"],["CA","81","4448"],["CA","82","4449"],["CA","83","444I"],["CA","84","444J"],["CA","85","444Q"],["CA","86","444K"],["CA","87","444A"],["CA","88","4442"],["CB","89","33444"],["CB","90","44455"],["CB","91","44466"],["CB","92","44477"],["CB","93","44488"],["CB","94","44499"],["CB","95","444II"],["CB","96","444JJ"],["CB","97","444QQ"],["CB","98","444KK"],["CB","99","444AA"],["CA","100","3555"],["CA","101","4555"],["CA","102","5556"],["CA","103","5557"],["CA","104","5558"],["CA","105","5559"],["CA","106","555I"],["CA","107","555J"],["CA","108","555Q"],["CA","109","555K"],["CA","110","555A"],["CA","111","5552"],["CB","112","33555"],["CB","113","44555"],["CB","114","55566"],["CB","115","55577"],["CB","116","55588"],["CB","117","55599"],["CB","118","555II"],["CB","119","555JJ"],["CB","120","555QQ"],["CB","121","555KK"],["CB","122","555AA"],["CA","123","3666"],["CA","124","4666"],["CA","125","5666"],["CA","126","6667"],["CA","127","6668"],["CA","128","6669"],["CA","129","666I"],["CA","130","666J"],["CA","131","666Q"],["CA","132","666K"],["CA","133","666A"],["CA","134","6662"],["CB","135","33666"],["CB","136","44666"],["CB","137","55666"],["CB","138","66677"],["CB","139","66688"],["CB","140","66699"],["CB","141","666II"],["CB","142","666JJ"],["CB","143","666QQ"],["CB","144","666KK"],["CB","145","666AA"],["CA","146","3777"],["CA","147","4777"],["CA","148","5777"],["CA","149","6777"],["CA","150","7778"],["CA","151","7779"],["CA","152","777I"],["CA","153","777J"],["CA","154","777Q"],["CA","155","777K"],["CA","156","777A"],["CA","157","7772"],["CB","158","33777"],["CB","159","44777"],["CB","160","55777"],["CB","161","66777"],["CB","162","77788"],["CB","163","77799"],["CB","164","777II"],["CB","165","777JJ"],["CB","166","777QQ"],["CB","167","777KK"],["CB","168","777AA"],["CA","169","3888"],["CA","170","4888"],["CA","171","5888"],["CA","172","6888"],["CA","173","7888"],["CA","174","8889"],["CA","175","888I"],["CA","176","888J"],["CA","177","888Q"],["CA","178","888K"],["CA","179","888A"],["CA","180","8882"],["CB","181","33888"],["CB","182","44888"],["CB","183","55888"],["CB","184","66888"],["CB","185","77888"],["CB","186","88899"],["CB","187","888II"],["CB","188","888JJ"],["CB","189","888QQ"],["CB","190","888KK"],["CB","191","888AA"],["CA","192","3999"],["CA","193","4999"],["CA","194","5999"],["CA","195","6999"],["CA","196","7999"],["CA","197","8999"],["CA","198","999I"],["CA","199","999J"],["CA","200","999Q"],["CA","201","999K"],["CA","202","999A"],["CA","203","9992"],["CB","204","33999"],["CB","205","44999"],["CB","206","55999"],["CB","207","66999"],["CB","208","77999"],["CB","209","88999"],["CB","210","999II"],["CB","211","999JJ"],["CB","212","999QQ"],["CB","213","999KK"],["CB","214","999AA"],["CA","215","3III"],["CA","216","4III"],["CA","217","5III"],["CA","218","6III"],["CA","219","7III"],["CA","220","8III"],["CA","221","9III"],["CA","222","IIIJ"],["CA","223","IIIQ"],["CA","224","IIIK"],["CA","225","IIIA"],["CA","226","III2"],["CB","227","33III"],["CB","228","44III"],["CB","229","55III"],["CB","230","66III"],["CB","231","77III"],["CB","232","88III"],["CB","233","99III"],["CB","234","IIIJJ"],["CB","235","IIIQQ"],["CB","236","IIIKK"],["CB","237","IIIAA"],["CA","238","3JJJ"],["CA","239","4JJJ"],["CA","240","5JJJ"],["CA","241","6JJJ"],["CA","242","7JJJ"],["CA","243","8JJJ"],["CA","244","9JJJ"],["CA","245","IJJJ"],["CA","246","JJJQ"],["CA","247","JJJK"],["CA","248","JJJA"],["CA","249","JJJ2"],["CB","250","33JJJ"],["CB","251","44JJJ"],["CB","252","55JJJ"],["CB","253","66JJJ"],["CB","254","77JJJ"],["CB","255","88JJJ"],["CB","256","99JJJ"],["CB","257","IIJJJ"],["CB","258","JJJQQ"],["CB","259","JJJKK"],["CB","260","JJJAA"],["CA","261","3QQQ"],["CA","262","4QQQ"],["CA","263","5QQQ"],["CA","264","6QQQ"],["CA","265","7QQQ"],["CA","266","8QQQ"],["CA","267","9QQQ"],["CA","268","IQQQ"],["CA","269","JQQQ"],["CA","270","QQQK"],["CA","271","QQQA"],["CA","272","QQQ2"],["CB","273","33QQQ"],["CB","274","44QQQ"],["CB","275","55QQQ"],["CB","276","66QQQ"],["CB","277","77QQQ"],["CB","278","88QQQ"],["CB","279","99QQQ"],["CB","280","IIQQQ"],["CB","281","JJQQQ"],["CB","282","QQQKK"],["CB","283","QQQAA"],["CA","284","3KKK"],["CA","285","4KKK"],["CA","286","5KKK"],["CA","287","6KKK"],["CA","288","7KKK"],["CA","289","8KKK"],["CA","290","9KKK"],["CA","291","IKKK"],["CA","292","JKKK"],["CA","293","QKKK"],["CA","294","KKKA"],["CA","295","KKK2"],["CB","296","33KKK"],["CB","297","44KKK"],["CB","298","55KKK"],["CB","299","66KKK"],["CB","300","77KKK"],["CB","301","88KKK"],["CB","302","99KKK"],["CB","303","IIKKK"],["CB","304","JJKKK"],["CB","305","QQKKK"],["CB","306","KKKAA"]];

//var userCard="8";
function INShow(userCard) {//上家打完下家打的时候调的
    var userLength = userCard.length;//对方打的牌的长度
    var PP = [];
    var OK;
    for (var iter in CMRule) {
        var MK = CMRule[iter][0];
        var Htype = CMRule[iter][1];
        var Hsize = CMRule[iter][2];
        if (userCard === Hsize) {

            OK = Htype;
            break
        }
    }
    if (parseInt(userLength) === 1) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "A" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 2) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "B" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }

    } else if (parseInt(userLength) === 3) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "C" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 4) {
        var typet1 = userCard.substring(0, 1);
        var typet2 = userCard.substring(1, 2);
        var typet3 = userCard.substring(2, 3);
        var typet4 = userCard.substring(3, 4);
        for (var iter in CMRule) {
            if (CMRule[iter][0] === "D" && parseInt(CMRule[iter][1]) > parseInt(OK) && (typet1 === typet4)) {
                PP.push(CMRule[iter][2]);
            } else if (CMRule[iter][0] === "D" || (CMRule[iter][0] === "CA" && parseInt(CMRule[iter][1]) > parseInt(OK) && (typet1 !== typet4))) {
                if (typet1 !== typet4) {
                    PP.push(CMRule[iter][2]);
                }
            }
        }
    } else if (parseInt(userLength) === 5) {
        var typet1 = userCard.substring(0, 1);
        var typet2 = userCard.substring(1, 2);
        var typet3 = userCard.substring(2, 3);
        var typet4 = userCard.substring(3, 4);
        var typet5 = userCard.substring(4, 5);
        for (var iter in CMRule) {
            var KH;
            if (CMRule[iter][0] === "D") {
                KH = CMRule[iter][2];
            }
            if (((CMRule[iter][0] === "F" && parseInt(CMRule[iter][1]) > parseInt(OK)) && (typet1 !== typet2 && typet1 !== typet3 && typet1 !== typet4 && typet2 !== typet3 && typet2 !== typet4 && typet3 !== typet4 && typet4 !== typet5)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
            else if ((CMRule[iter][0] === "CB" && parseInt(CMRule[iter][1]) > parseInt(OK) && (typet4 === typet5 && typet1 !== typet5 && typet2 !== typet4) )) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 6) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "G" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 7) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "HH" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 8) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "I" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 9) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "J" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 10) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "K" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    } else if (parseInt(userLength) === 11) {
        for (var iter in CMRule) {
            if ((CMRule[iter][0] === "L" && parseInt(CMRule[iter][1]) > parseInt(OK)) || (CMRule[iter][0] === "D")) {
                PP.push(CMRule[iter][2]);
            }
        }
    }
    return PP;
}
//console.log(StarShow("S","S939854248956II"));
function StarShow(myCard, MyCardsSize) {//发起规则

//    var userLength=userCard.length;
    var size = MyCardsSize.length;
    var OP = [];
    var PP = [];
    var MM;

    if (parseInt(size) === 16) {
        for (var i = 0; i < size; i++) {
            var op = MyCardsSize.substring(i, i + 1);
            PP.push(op);
        }
        for (var j = 0; j < PP.length; j++) {
            var M = PP[j];
            if (M === "S") {
                MM = M;
            }
        }
        if (MM === "S") {
            for (var iter in CMRule) {
                var Htype2 = CMRule[iter][1];
                var Hsize2 = CMRule[iter][2];
                for (var r = 0; r < parseInt(String(Hsize2).length); r++) {
                    var lk = String(Hsize2).substring(r, r + 1);
                    if (lk === "S") {
                        OP.push(Hsize2);
                    }
                }

            }
        } else {
            for (var iter in CMRule) {
                var Htype = CMRule[iter][1];
                var Hsize = CMRule[iter][2];
                if (Hsize === myCard) {

                    OP.push(Hsize);
                }
            }
        }
    } else {
        for (var iter in CMRule) {
            var Type = CMRule[iter][0];
            var Htype = CMRule[iter][1];
            var Hsize = CMRule[iter][2];
            if (Hsize === myCard) {
                OP.push(Hsize);

            }
        }
    }
    return OP;
}




